---
import { type CollectionEntry, getCollection } from "astro:content";
import BlogPost from "../../../layouts/BlogPost.astro";

export async function getStaticPaths() {
  let posts = await getCollection("posts");

  let fixedPosts = posts.map((post) => ({
    slug: post.slug.replace(/^[\d-]+--/, ""),
    params: { slug: post.slug },
    props: post,
  }));

  console.log("blog/page/index", fixedPosts);

  return fixedPosts;
}
// type Props = CollectionEntry<'blog'>;

const post = Astro.props;
const results = await post.render();
const { Content } = results;
---

<BlogPost {...post.data}>
  <Content />
</BlogPost>
